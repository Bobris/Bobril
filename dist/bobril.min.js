"undefined"==typeof DEBUG&&(DEBUG=!0),b=function(e,t){function n(e,t){if(DEBUG&&!e)throw Error(t||"assertion failed")}function r(e,n,r,o){if(!r)return t;for(var i in r){var a=r[i],l=o[i];if(l===t||l!==a)if(o[i]=a,"style"===i){var f;if(l){for(f in a){var c=a[f];l[f]!==c&&(n.style[f]=c)}for(f in l)f in a||(n.style[f]="")}else for(f in a)n.style[f]=a[f]}else if($)"href"===i?n.setAttributeNS("http://www.w3.org/1999/xlink","href",a):"className"===i?n.setAttribute("class",a):n.setAttribute(i,a);else if("value"===i&&i in n){var u=n[i];l===t&&(e.ctx.b$value=a),a!==u&&(l===t||u===l?n[i]=a:k(e))}else i in n&&"list"!=i&&"form"!=i?n[i]=a:n.setAttribute(i,a)}return o}function o(t){var n=t;n.component&&(n.ctx={},n.component.init&&n.component.init(n.ctx,t));var o=$;return""===t.tag?(n.element=e.document.createTextNode(""+n.content),n):("svg"===t.tag?(n.element=e.document.createElementNS("http://www.w3.org/2000/svg",t.tag),$=!0):n.element=e.document.createElement(t.tag),a(n),n.attrs=r(n,n.element,n.attrs,{}),$=o,c(n),n)}function i(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t?{tag:"",content:e}:e}function a(e){var t=e.children;if(t){S(t)||(t=[t]);for(var n=0,r=t.length;r>n;){var a=t[n];if(S(a))t.splice.apply(t,[n,1].concat(a)),r=t.length;else{var l=t[n]=o(i(a));e.element.appendChild(l.element),n++}}e.children=t}}function l(e){var t=e.children;if(t)for(var n=0,r=t.length;r>n;n++)l(t[n]);e.component&&e.component.destroy&&e.component.destroy(e.ctx,e,e.element),""!==e.tag&&(e.element[j]=null)}function f(e){l(e);var t=e.element.parentNode;t&&t.removeChild(e.element)}function c(e){e.element[j]=e;var t=e.component;t&&t.postInitDom&&(I.push(!1),L.push(e))}function u(e){var t=e.component;t&&t.postUpdateDom&&(I.push(!0),L.push(e))}function s(e){return e[j]}function p(e,t){if(e.component&&e.component.shouldChange&&!e.component.shouldChange(t.ctx,e,t))return t;if(e.tag===t.tag)if(""===e.tag){if(t.content===e.content)return t;if(t.content=e.content,"textContent"in t.element)return t.element.textContent=""+t.content,t}else{var n=$;if("svg"===e.tag&&($=!0),!e.attrs&&!t.attrs)return v(e,t),$=n,u(t),t;if(e.attrs&&t.attrs&&T(e.attrs).join()===T(t.attrs).join()&&e.attrs.id===t.attrs.id)return v(e,t),t.attrs=r(t,t.element,e.attrs,t.attrs),$=n,u(t),t;$=n}var i=o(e),a=t.element.parentNode;return a&&a.insertBefore(i.element,t.element),f(t),i}function m(){for(var e=L.length,t=0;e>t;t++){var n;I[t]?(n=L[t],n.component.postUpdateDom(n.ctx,n,n.element)):(n=L[t],n.component.postInitDom(n.ctx,n,n.element))}I=[],L=[]}function v(e,t){t.children=d(t.element,e.children,t.children)}function d(e,r,a){r=r||[],S(r)||(r=[r]),a=a||[];for(var l=r.length,c=a.length,u=c>l?l:c,s=0;l>s;){var m=r[s];S(m)?(r.splice.apply(r,[s,1].concat(m)),l=r.length):(r[s]=i(m),s++)}for(s=0;u>s&&r[s].key===a[s].key;s++)a[s]=p(r[s],a[s]);if(s===u){for(;l>s;)a.push(o(r[s])),e.appendChild(a[s].element),s++;for(;c>s;)c--,f(a[c]),a.pop()}else{var v,d,h,y={},g={},k=s,b=0;for(v=k;c>v;v++)h=a[v],d=h.key,d===t||d in y?b--:y[d]=v;for(;l>s;s++)h=r[s],d=h.key,d===t||d in g?b++:g[d]=s;var w=0;s=k,v=k;for(var x;c>v&&l>s;)if(null!==a[v])if(x=a[v].key){if(d=r[s].key,!d){for(s++;l>s&&!(d=r[s].key););if(!d)break}var C=y[d];C!==t?x in g?v===C+w?(a[v]=p(r[s],a[v]),s++,v++):(a.splice(v,0,a[C+w]),w++,a[C+w]=null,e.insertBefore(a[v].element,a[v+1].element),a[v]=p(r[s],a[v]),v++,c++,s++):(f(a[v]),a.splice(v,1),w--,c--):(a.splice(v,0,o(r[s])),e.insertBefore(a[v].element,a[v+1].element),w++,s++,v++,c++)}else v++;else a.splice(v,1),c--,w--;for(;c>v;)null!==a[v]?a[v].key?(f(a[v]),a.splice(v,1),c--):v++:(a.splice(v,1),c--);for(;l>s;)d=r[s].key,d&&(a.push(o(r[s])),e.insertBefore(a[v].element,a[v+1].element),w++,v++,c++),s++;for(s=v=k;l>s;)if(c>v&&(x=a[v].key))v++;else if(d=r[s].key,d!==a[s].key)if(d){if(n(s===v),l-s-b==c-v){for(;;)if(f(a[v]),a.splice(v,1),c--,b++,n(v!==c,"there still need to exist key node"),a[v].key)break;continue}for(;!a[v].key;)v++;n(d!==a[v].key),a.splice(s,0,a[v]),a.splice(v+1,1),e.insertBefore(a[s].element,a[s+1].element),s++,v=s}else if(c>v){if(a.splice(s,0,a[v]),a.splice(v+1,1),d){for(s++;l>s&&(d=r[s].key););if(d)break}a[v]=p(r[s],a[v]),s++,v++}else a.push(o(r[s])),e.appendChild(a[v].element),s++,v++,c++;else{if(d){s++;continue}a[s]=p(r[s],a[s]),s++,s>v&&(v=s)}for(;c>s;)c--,f(a[c]),a.pop()}return a}function h(t){if(O)q(t);else{var n=50/3+H-P();0>n&&(n=0),e.setTimeout(function(){H=P(),t(H-z)},n)}}function y(){K||(K=!0,h(B))}function g(t,n,r){function o(t){t=t||e.event;var n=t.target||t.srcElement,o=s(n);r(t,n,o)}t.addEventListener?t.addEventListener(n,o):t.attachEvent("on"+n,o)}function k(e){if(e){var t=e.component;if(t&&t.onChange){var n=e.ctx,r=e.element.value;n.b$value!==r&&(n.b$value=r,t.onChange(n,r))}}}function b(e,t,n){k(n)}function w(e,t,n){k(n)}function x(e,t,n){k(n)}function C(e,t,n){k(n)}function E(e,t,n){k(n)}function D(){if(!M){M=!0;var e=document.body;e.oninput&&g(e,"input",b),g(e,"cut",w),g(e,"paste",w),g(e,"keydown",x),g(e,"keypress",C),g(e,"keyup",E)}}function A(e){F=e,y()}function B(e){D(),Q=e,K=!1;var t=F();J=d(document.body,t,J),m()}function N(e){var t=o(e);return m(),t}function U(e,t){var n=p(e,t);return m(),n}var j="data-bobril",G={}.toString,S=Array.isArray||function(e){return"[object Array]"===G.call(e)},T=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},$=!1,I=[],L=[],O=!1,q=e.requestAnimationFrame;q&&q(function(e){"number"==typeof e&&(O=!0)});var F,P=Date.now||function(){return(new Date).getTime()},z=P(),H=0,J=[],K=!1,M=!1,Q=0;return{createNode:N,updateNode:U,init:A,uptime:function(){return Q},now:P,invalidate:y,deref:s}}("undefined"!=typeof window?window:{});