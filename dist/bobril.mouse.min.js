!function(e,n,t){function r(e){return I===e}function o(){return F}function i(e){I=e}function u(){I=null}function c(e,n){if(null==I)return!1;var t=I.me.component[e];if(!t)return!1;F=!0;var r=t(I,n);return F=!1,r}function l(e){for(;e;){var n=e.style;if(n){var t=n.pointerEvents;if(void 0!==t)return"none"===t?!0:!1}e=e.parent}return!1}function f(n){var t=e.deref(n);return l(t)}function a(e){if(e.length){for(var n=e.length-1;n>=0;--n)e[n].t.style.visibility=e[n].p;return!0}return!1}function s(e,n){e.push({t:n,p:n.style.visibility}),n.style.visibility="hidden"}function v(e,n){for(var r=[],o=n;f(o);)s(r,o),o=t.elementFromPoint(e.x,e.y);if(a(r)){try{o.dispatchEvent(e)}catch(i){return!1}return j(e),!0}return!1}function d(e,n){L(e,5,n)}function m(e){return"mouse"==e?0:"pen"==e?2:1}function y(n,r,o,i){for(var u=[],c=o;l(i);)s(u,c),c=t.elementFromPoint(n,r),i=e.deref(c);return a(u),[c,i]}function h(n){return function(t,r,o){if(l(o)){var i=y(t.x,t.y,r,o);r=i[0],o=i[1]}var u=t.button+1,c=m(t.pointerType),f=t.buttons;if(0===u&&0===c&&f)for(u=1;!(1&f);)f>>=1,u++;var a={id:t.pointerId,type:c,x:t.clientX,y:t.clientY,button:u,shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey,meta:t.metaKey||!1};return e.emitEvent("!"+n,a,r,o)?(j(t),!0):!1}}function p(n){return function(r,o,i){for(var u=!1,c=0;c<r.changedTouches.length;c++){var l=r.changedTouches[c];o=t.elementFromPoint(l.clientX,l.clientY),i=e.deref(o);var f={id:l.identifier+2,type:1,x:l.clientX,y:l.clientY,button:1,shift:r.shiftKey,ctrl:r.ctrlKey,alt:r.altKey,meta:r.metaKey||!1};e.emitEvent("!"+n,f,o,i)&&(u=!0)}return u?(j(r),!0):!1}}function b(n){return function(r,o,i){if(o=t.elementFromPoint(r.clientX,r.clientY),i=e.deref(o),l(i)){var u=y(r.clientX,r.clientY,o,i);o=u[0],i=u[1]}var c={id:1,type:0,x:r.clientX,y:r.clientY,button:C(r),shift:r.shiftKey,ctrl:r.ctrlKey,alt:r.altKey,meta:r.metaKey||!1};return e.emitEvent("!"+n,c,o,i)?(j(r),!0):!1}}function g(e,n,t){return Math.abs(e-n)<t}function w(n){var r=t.elementFromPoint(n.x,n.y),o=e.vdomPath(r),i=0==o.length?null:o[o.length-1];if(l(i)){var u=y(n.x,n.y,r,i);r=u[0],o=e.vdomPath(r)}e.bubble(i,"onMouseOver",n);for(var c=0;c<W.length&&c<o.length&&W[c]===o[c];)c++;var f,a,s=W.length;for(s>0&&(f=W[s-1],f&&(a=f.component,a&&a.onMouseOut&&a.onMouseOut(f.ctx,n)));s>c;)s--,f=W[s],f&&(a=f.component,a&&a.onMouseLeave&&a.onMouseLeave(f.ctx,n));for(;s<o.length;)f=o[s],f&&(a=f.component,a&&a.onMouseEnter&&a.onMouseEnter(f.ctx,n)),s++;return W=o,s>0&&(f=W[s-1],f&&(a=f.component,a&&a.onMouseIn&&a.onMouseIn(f.ctx,n))),!1}function P(){return 0===Object.keys(A).length}function M(e){return-1===G&&P()&&(G=e.id,H=R(),J=e.x,N=e.y,Q=!1,w(e)),A[e.id]=e.type,G!==e.id&&(Q=!0),!1}function K(n,t,r){return 0===n.type&&0===n.button&&null!=A[n.id]&&(n.button=1,e.emitEvent("!PointerUp",n,t,r),n.button=0),G===n.id?(w(n),g(J,n.x,13)&&g(N,n.y,13)||(Q=!0)):P()&&w(n),!1}function x(n,t,r){if(delete A[n.id],G==n.id&&(w(n),G=-1,1==n.type&&!Q&&R()-H<750)){e.emitEvent("!PointerCancel",n,t,r);var o=c(V,n)||null!=e.bubble(r,V,n),i=e.ieVersion()?800:500;return B.push([n.x,n.y,R()+i,o?1:0]),o}return!1}function k(e){return delete A[e.id],G==e.id&&(G=-1),!1}function E(e){for(var n=R(),t=0;t<B.length;t++){var r=B[t];if(r[2]<n)B.splice(t,1),t--;else if(g(r[0],e.clientX,50)&&g(r[1],e.clientY,50))return B.splice(t,1),r[3]&&j(e),!0}return!1}function O(n){return function(t,r,o){return(G==t.id||P())&&(c(n,t)||e.bubble(o,n,t))?!0:!1}}function C(e){return e.which||e.button}function X(n){return function(t,r,o){var i=C(t)||1;if(1!==i)return!1;var u={x:t.clientX,y:t.clientY,button:i,shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey,meta:t.metaKey||!1};return c(n,u)||e.bubble(o,n,u)?(j(t),!0):!1}}function Y(n,r){var o=t.elementFromPoint(n,r),i=e.deref(o);if(l(i)){var u=y(n,r,o,i);i=u[1]}return i}function D(e,n,t){for(;t;){var r=t.style;if(r){var o=r.userSelect;if("none"===o)return j(e),!0;if(o)break}t=t.parent}return!1}var F,U,I=null,V="onClick",j=e.preventDefault,L=e.addEvent,T=["PointerDown","PointerMove","PointerUp","PointerCancel"];if(e.ieVersion()&&e.ieVersion()<11){var S=["click","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","scroll","wheel"];for(U=0;U<S.length;++U)L(S[U],1,v)}if(void 0!==n.onpointerdown)for(U=0;4>U;U++){var q=T[U];d(q.toLowerCase(),h(q))}else if(void 0!==n.onmspointerdown)for(U=0;4>U;U++){var q=T[U];d("MS"+q,h(q))}else void 0!==n.ontouchstart&&(d("touchstart",p(T[0])),d("touchmove",p(T[1])),d("touchend",p(T[2])),d("touchcancel",p(T[3]))),d("mousedown",b(T[0])),d("mousemove",b(T[1])),d("mouseup",b(T[2]));for(var z=0;4>z;z++)!function(n){var t="on"+n;L("!"+n,50,function(n,r,o){return c(t,n)||null!=e.bubble(o,t,n)})}(T[z]);for(var A=Object.create(null),B=[],G=-1,H=0,J=0,N=0,Q=!1,R=e.now,W=[],Z=["!PointerDown","!PointerMove","!PointerUp","!PointerCancel","click"],$=[M,K,x,k,E],U=0;5>U;U++)L(Z[U],3,$[U]);for(var _=["Down","Move","Up","Up"],U=0;4>U;U++)L(Z[U],80,O("onMouse"+_[U]));d("selectstart",D),d("click",X(V)),d("dblclick",X("onDoubleClick")),e.pointersDownCount=function(){return Object.keys(A).length},e.firstPointerDownId=function(){return G},e.ignoreClick=function(n,t){var r=e.ieVersion()?800:500;B.push([n,t,R()+r,1])},e.registerMouseOwner=i,e.isMouseOwner=r,e.isMouseOwnerEvent=o,e.releaseMouseOwner=u,e.nodeOnPoint=Y}(b,window,document);