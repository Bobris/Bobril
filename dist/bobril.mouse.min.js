!function(n,e,t){function r(n){return U===n}function o(){return X}function i(n){U=n}function u(){U=null}function c(n,e){if(null==U)return!1;var t=U.me.component[n];if(!t)return!1;X=!0;var r=t(U,e);return X=!1,r}function l(n){return n&&n.style&&"none"===n.style.pointerEvents}function f(e){var t=n.deref(e);return l(t)}function v(n){if(n.length){for(var e=n.length-1;e>=0;--e)n[e].t.style.visibility=n[e].p;return!0}return!1}function a(n,e){n.push({t:e,p:e.style.visibility}),e.style.visibility="hidden"}function s(e,r){for(var o=[],i=r;f(i);)a(o,i),i=t.elementFromPoint(e.x,e.y);if(v(o)){try{n.ieVersion()<9?i.fireEvent("on"+e.type,e):i.dispatchEvent(e)}catch(u){return!1}return F(e),!0}return!1}function d(n,e){L(n,5,e)}function y(n){return"mouse"==n?0:"pen"==n?2:1}function h(e,r,o,i){for(var u=[],c=o;l(i);)a(u,c),c=t.elementFromPoint(e,r),i=n.deref(c);return v(u),[c,i]}function p(e){return function(t,r,o){if(l(o)){var i=h(t.x,t.y,r,o);r=i[0],o=i[1]}var u={id:t.pointerId,type:y(t.pointerType),x:t.clientX,y:t.clientY};return n.emitEvent("!"+e,u,r,o)?(F(t),!0):!1}}function m(e){return function(t,r,o){for(var i=!1,u=0;u<t.changedTouches.length;u++){var c=t.changedTouches[u],l={id:c.identifier+2,type:1,x:c.clientX,y:c.clientY};n.emitEvent("!"+e,l,r,o)&&(i=!0)}return i?(F(t),!0):!1}}function b(e){return function(t,r,o){if(l(o)){var i=h(t.x,t.y,r,o);r=i[0],o=i[1]}var u={id:1,type:0,x:t.clientX,y:t.clientY};return n.emitEvent("!"+e,u,r,o)?(F(t),!0):!1}}function g(n,e,t){return Math.abs(n-e)<t}function x(e){var r={x:e.x,y:e.y},o=t.elementFromPoint(e.x,e.y),i=n.vdomPath(o),u=0==i.length?null:i[i.length-1];if(l(u)){var c=h(e.x,e.y,o,u);o=c[0],i=n.vdomPath(o)}n.bubble(u,"onMouseOver",r);for(var f=0;f<N.length&&f<i.length&&N[f]===i[f];)f++;for(var v,a,s=N.length;s>f;)s--,v=N[s],v&&(a=v.component,a&&a.onMouseLeave&&a.onMouseLeave(v.ctx,r));for(;s<i.length;)v=i[s],v&&(a=v.component,a&&a.onMouseEnter&&a.onMouseEnter(v.ctx,r)),s++;return N=i,!1}function w(){return 0===Object.keys(q).length}function M(n){return-1===A&&w()&&(A=n.id,B=K(),G=n.x,H=n.y,J=!1,x(n)),q[n.id]=n.type,A!==n.id&&(J=!0),!1}function P(n){return A===n.id?(x(n),g(G,n.x,13)&&g(H,n.y,13)||(J=!0)):w()&&x(n),!1}function E(e,t,r){if(delete q[e.id],A==e.id&&(x(e),A=-1,1==e.type&&!J&&K()-B<750)){n.emitEvent("!PointerCancel",e,t,r);var o={x:e.x,y:e.y},i=c(j,o)||n.bubble(r,j,o);return z.push([e.x,e.y,K()+500,i?1:0]),i}return!1}function k(n){return delete q[n.id],A==n.id&&(A=-1),!1}function C(n){for(var e=K(),t=0;t<z.length;t++){var r=z[t];if(r[2]<e)z.splice(t,1),t--;else if(g(r[0],n.clientX,50)&&g(r[1],n.clientY,50))return z.splice(t,1),r[3]&&F(n),!0}return!1}function O(e){return function(t,r,o){if(A!=t.id&&!w())return!1;var i={x:t.x,y:t.y};return c(e,i)||n.bubble(o,e,i)?!0:!1}}function D(e){return function(t,r,o){var i={x:t.clientX,y:t.clientY};return c(e,i)||n.bubble(o,e,i)?(F(t),!0):!1}}var X,Y,U=null,j="onClick",F=n.preventDefault,L=n.addEvent,T=["PointerDown","PointerMove","PointerUp","PointerCancel"];if(n.ieVersion()&&n.ieVersion()<11){var V=["click","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","scroll","wheel"];for(Y=0;Y<V.length;++Y)L(V[Y],1,s)}if(void 0!==e.onpointerdown)for(Y=0;4>Y;Y++){var I=T[Y];d(I.toLowerCase(),p(I))}else if(void 0!==e.onmspointerdown)for(Y=0;4>Y;Y++){var I=T[Y];d("MS"+I,p(I))}else void 0!==e.ontouchstart&&(d("touchstart",m(T[0])),d("touchmove",m(T[1])),d("touchend",m(T[2])),d("touchcancel",m(T[3]))),d("mousedown",b(T[0])),d("mousemove",b(T[1])),d("mouseup",b(T[2]));for(var S=0;4>S;S++)!function(e){var t="on"+e;L("!"+e,50,function(e,r,o){return c(t,e)||n.bubble(o,t,e)})}(T[S]);for(var q=Object.create(null),z=[],A=-1,B=0,G=0,H=0,J=!1,K=n.now,N=[],Q=["!PointerDown","!PointerMove","!PointerUp","!PointerCancel","click"],R=[M,P,E,k,C],Y=0;5>Y;Y++)L(Q[Y],3,R[Y]);for(var W=["Down","Move","Up","Up"],Y=0;4>Y;Y++)L(Q[Y],80,O("onMouse"+W[Y]));d("click",D(j)),d("dblclick",D("onDoubleClick")),n.pointersDownCount=function(){return Object.keys(q).length},n.firstPointerDownId=function(){return A},n.ignoreClick=function(n,e){z.push([n,e,K()+500,1])},n.registerMouseOwner=i,n.isMouseOwner=r,n.isMouseOwnerEvent=o,n.releaseMouseOwner=u}(b,window,document);