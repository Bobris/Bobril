!function(e,t,n){function r(e){return V===e}function o(){return U}function i(e){V=e}function u(){V=null}function l(e,t){if(null==V)return!1;var n=V.me.component[e];if(!n)return!1;U=!0;var r=n(V,t);return U=!1,r}function c(e){for(;e;){var t=e.style;if(t){var n=t.pointerEvents;if(void 0!==n)return"none"===n?!0:!1}e=e.parent}return!1}function a(t){var n=e.deref(t);return c(n)}function f(e){if(e.length){for(var t=e.length-1;t>=0;--t)e[t].t.style.visibility=e[t].p;return!0}return!1}function s(e,t){e.push({t:t,p:t.style.visibility}),t.style.visibility="hidden"}function v(e,t){for(var r=[],o=t;a(o);)s(r,o),o=n.elementFromPoint(e.x,e.y);if(f(r)){try{o.dispatchEvent(e)}catch(i){return!1}return L(e),!0}return!1}function d(e,t){T(e,5,t)}function h(e){return"mouse"==e?0:"pen"==e?2:1}function m(t,r,o,i){for(var u=[],l=o;c(i);)s(u,l),l=n.elementFromPoint(t,r),i=e.deref(l);return f(u),[l,i]}function y(t){return function(n,r,o){if(c(o)){var i=m(n.x,n.y,r,o);r=i[0],o=i[1]}var u=n.button+1,l=h(n.pointerType),a=n.buttons;if(0===u&&0===l&&a)for(u=1;!(1&a);)a>>=1,u++;var f={id:n.pointerId,type:l,x:n.clientX,y:n.clientY,button:u,shift:n.shiftKey,ctrl:n.ctrlKey,alt:n.altKey,meta:n.metaKey||!1};return e.emitEvent("!"+t,f,r,o)?(L(n),!0):!1}}function b(t){return function(r,o,i){for(var u=!1,l=0;l<r.changedTouches.length;l++){var c=r.changedTouches[l];o=n.elementFromPoint(c.clientX,c.clientY),i=e.deref(o);var a={id:c.identifier+2,type:1,x:c.clientX,y:c.clientY,button:1,shift:r.shiftKey,ctrl:r.ctrlKey,alt:r.altKey,meta:r.metaKey||!1};e.emitEvent("!"+t,a,o,i)&&(u=!0)}return u?(L(r),!0):!1}}function p(t){return function(r,o,i){if(o=n.elementFromPoint(r.clientX,r.clientY),i=e.deref(o),c(i)){var u=m(r.clientX,r.clientY,o,i);o=u[0],i=u[1]}var l={id:1,type:0,x:r.clientX,y:r.clientY,button:O(r),shift:r.shiftKey,ctrl:r.ctrlKey,alt:r.altKey,meta:r.metaKey||!1};return e.emitEvent("!"+t,l,o,i)?(L(r),!0):!1}}function w(e,t,n){return Math.abs(e-t)<n}function g(t){var r=n.elementFromPoint(t.x,t.y),o=e.vdomPath(r),i=0==o.length?null:o[o.length-1];if(c(i)){var u=m(t.x,t.y,r,i);r=u[0],o=e.vdomPath(r)}e.bubble(i,"onMouseOver",t);for(var l=0;l<Z.length&&l<o.length&&Z[l]===o[l];)l++;var a,f,s=Z.length;for(s>0&&(a=Z[s-1],a&&(f=a.component,f&&f.onMouseOut&&f.onMouseOut(a.ctx,t)));s>l;)s--,a=Z[s],a&&(f=a.component,f&&f.onMouseLeave&&f.onMouseLeave(a.ctx,t));for(;s<o.length;)a=o[s],a&&(f=a.component,f&&f.onMouseEnter&&f.onMouseEnter(a.ctx,t)),s++;return Z=o,s>0&&(a=Z[s-1],a&&(f=a.component,f&&f.onMouseIn&&f.onMouseIn(a.ctx,t))),!1}function M(){return 0===Object.keys(A).length}function K(e){return-1===G&&M()&&(G=e.id,H=R(),J=e.x,N=e.y,Q=!1,g(e)),A[e.id]=e.type,G!==e.id&&(Q=!0),!1}function P(t,n,r){return 0===t.type&&0===t.button&&null!=A[t.id]&&(t.button=1,e.emitEvent("!PointerUp",t,n,r),t.button=0),G===t.id?(g(t),w(J,t.x,13)&&w(N,t.y,13)||(Q=!0)):M()&&g(t),!1}function x(t,n,r){if(delete A[t.id],G==t.id&&(g(t),G=-1,1==t.type&&!Q&&R()-H<750)){e.emitEvent("!PointerCancel",t,n,r);var o=l(j,t)||null!=e.bubble(r,j,t),i=e.ieVersion()?800:500;return B.push([t.x,t.y,R()+i,o?1:0]),o}return!1}function E(e){return delete A[e.id],G==e.id&&(G=-1),!1}function X(e){for(var t=R(),n=0;n<B.length;n++){var r=B[n];if(r[2]<t)B.splice(n,1),n--;else if(w(r[0],e.clientX,50)&&w(r[1],e.clientY,50))return B.splice(n,1),r[3]&&L(e),!0}return!1}function k(t){return function(n,r,o){return(G==n.id||M())&&(l(t,n)||e.bubble(o,t,n))?!0:!1}}function O(e){return e.which||e.button}function D(t){return function(n,r,o){var i=O(n)||1;if(1!==i)return!1;var u={x:n.clientX,y:n.clientY,button:i,shift:n.shiftKey,ctrl:n.ctrlKey,alt:n.altKey,meta:n.metaKey||!1};return l(t,u)||e.bubble(o,t,u)?(L(n),!0):!1}}function Y(t,r){var o=n.elementFromPoint(t,r),i=e.deref(o);if(c(i)){var u=m(t,r,o,i);i=u[1]}return i}function C(e,t,n){for(;n;){var r=n.style;if(r){var o=r.userSelect;if("none"===o)return L(e),!0;if(o)break}n=n.parent}return!1}function F(t,n,r){if(c(r)){var o=m(t.x,t.y,n,r);n=o[0],r=o[1]}var i=t.button+1,u=t.buttons;if(0===i&&u)for(i=1;!(1&u);)u>>=1,i++;var a,f=0;"mousewheel"==te?(a=-1/40*t.wheelDelta,t.wheelDeltaX&&(f=-1/40*t.wheelDeltaX)):(f=t.deltaX,a=t.deltaY);var s={dx:f,dy:a,x:t.clientX,y:t.clientY,button:i,shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey,meta:t.metaKey||!1};return l("onMouseWheel",s)||e.bubble(r,"onMouseWheel",s)?(L(t),!0):!1}var U,I,V=null,j="onClick",L=e.preventDefault,T=e.addEvent,S=["PointerDown","PointerMove","PointerUp","PointerCancel"];if(e.ieVersion()&&e.ieVersion()<11){var W=["click","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","scroll","wheel"];for(I=0;I<W.length;++I)T(W[I],1,v)}if(void 0!==t.onpointerdown)for(I=0;4>I;I++){var q=S[I];d(q.toLowerCase(),y(q))}else if(void 0!==t.onmspointerdown)for(I=0;4>I;I++){var q=S[I];d("MS"+q,y(q))}else void 0!==t.ontouchstart&&(d("touchstart",b(S[0])),d("touchmove",b(S[1])),d("touchend",b(S[2])),d("touchcancel",b(S[3]))),d("mousedown",p(S[0])),d("mousemove",p(S[1])),d("mouseup",p(S[2]));for(var z=0;4>z;z++)!function(t){var n="on"+t;T("!"+t,50,function(t,r,o){return l(n,t)||null!=e.bubble(o,n,t)})}(S[z]);for(var A=Object.create(null),B=[],G=-1,H=0,J=0,N=0,Q=!1,R=e.now,Z=[],$=["!PointerDown","!PointerMove","!PointerUp","!PointerCancel","click"],_=[K,P,x,E,X],I=0;5>I;I++)T($[I],3,_[I]);for(var ee=["Down","Move","Up","Up"],I=0;4>I;I++)T($[I],80,k("onMouse"+ee[I]));d("selectstart",C),d("click",D(j)),d("dblclick",D("onDoubleClick"));var te=("onwheel"in n.createElement("div")?"":"mouse")+"wheel";d(te,F),e.pointersDownCount=function(){return Object.keys(A).length},e.firstPointerDownId=function(){return G},e.ignoreClick=function(t,n){var r=e.ieVersion()?800:500;B.push([t,n,R()+r,1])},e.registerMouseOwner=i,e.isMouseOwner=r,e.isMouseOwnerEvent=o,e.releaseMouseOwner=u,e.nodeOnPoint=Y}(b,window,document);