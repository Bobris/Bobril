!function(e,n){function t(e){return m===e}function i(){return h}function r(e){m=e}function o(){m=null}function u(e){return e&&e.style&&"none"===e.style.pointerEvents}function l(n){var t=e.deref(n);return u(t)}function s(n,t){for(var i=[],r=t;l(r);)i.push({target:r,prevVisibility:r.style.visibility}),r.style.visibility="hidden",r=document.elementFromPoint(n.x,n.y);if(i.length){for(var o=i.length-1;o>=0;--o)i[o].target.style.visibility=i[o].prevVisibility;if(e.ieVersion()<9)r.fireEvent("on"+n.type,n);else try{r.dispatchEvent(n)}catch(u){return!1}return g(n),!0}return!1}function c(e,n){w(e,500,n)}function v(e){return"mouse"==e?0:"pen"==e?2:1}function f(n,t,i,r){for(var o=[],l=i;u(r);)o.push({target:l,prevVisibility:l.style.visibility}),l.style.visibility="hidden",l=document.elementFromPoint(n,t),r=e.deref(l);if(o.length)for(var s=o.length-1;s>=0;--s)o[s].target.style.visibility=o[s].prevVisibility;return[i,r]}function a(n){return function(t,i,r){if(u(r)){var o=f(t.x,t.y,i,r);i=o[0],r=o[1]}var l={id:t.pointerId,type:v(t.pointerType),x:t.clientX,y:t.clientY};return e.emitEvent("!"+n,l,i,r)?(g(t),!0):!1}}function d(n){return function(t,i,r){for(var o=!1,u=0;u<t.changedTouches.length;u++){var l=t.changedTouches[u],s={id:l.identifier+2,type:1,x:l.clientX,y:l.clientY};e.emitEvent("!"+n,s,i,r)&&(o=!0)}return o?(g(t),!0):!1}}function y(n){return function(t,i,r){if(u(r)){var o=f(t.x,t.y,i,r);i=o[0],r=o[1]}var l={id:1,type:0,x:t.clientX,y:t.clientY};return e.emitEvent("!"+n,l,i,r)?(g(t),!0):!1}}var h,p,m=null,g=e.preventDefault,w=e.addEvent,b=["PointerDown","PointerMove","PointerUp","PointerCancel"];if(e.ieVersion()&&e.ieVersion()<11){var P=["click","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","scroll","wheel"];for(p=0;p<P.length;++p)w(P[p],1,s)}if(void 0!==n.onpointerdown)for(p=0;p<b.length;p++)!function(e){c(e.toLowerCase(),a(e))}(b[p]);else if(void 0!==n.onmspointerdown)for(p=0;p<b.length;p++)!function(e){c("MS"+e,a(e))}(b[p]);else void 0!==n.ontouchstart&&(c("touchstart",d("PointerDown")),c("touchmove",d("PointerMove")),c("touchend",d("PointerUp")),c("touchcancel",d("PointerCancel"))),c("mousedown",y("PointerDown")),c("mousemove",y("PointerMove")),c("mouseup",y("PointerUp"));for(var E=0;E<b.length;E++)!function(n){w("!"+n,500,function(t,i,r){return e.bubble(r,"on"+n,t)})}(b[E]);e.registerMouseOwner=r,e.isMouseOwner=t,e.isMouseOwnerEvent=i,e.releaseMouseOwner=o}(b,window);