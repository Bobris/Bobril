!function(e){function n(e){var n=e.type;return"checkbox"===n||"radio"===n}function t(e,n){var t=e.length;if(t!==n.length)return!1;for(var r=0;t>r;r++)if(e[r]!==n[r])return!1;return!0}function r(e,n){for(var t=0;t<e.length;t++)if(e[t]===n)return!0;return!1}function o(e){for(var n=[],t=0;t<e.length;t++)e[t].selected&&n.push(e[t].value);return n}function a(r,c,l){if(c&&"OPTION"===c.nodeName&&(c=document.activeElement,l=e.deref(c)),!l)return!1;var v=l.component;if(!v)return!1;var d=null!=v.onChange,s=null!=v.onSelectionChange;if(!d&&!s)return!1;var h=l.ctx,g=c.tagName,m="SELECT"===g,p=m&&c.multiple;if(d&&p){var x=o(c.options);t(h[u],x)||(h[u]=x,v.onChange(h,x))}else if(d&&n(c)){if(r&&"change"===r.type)return setTimeout(function(){a(null,c,l)},10),!1;if("radio"===c.type)for(var E=document.getElementsByName(c.name),k=0;k<E.length;k++){var C=E[k],P=e.deref(C);if(P){var S=P.component;if(S&&S.onChange){var b=P.ctx,y=C.checked;b[u]!==y&&(b[u]=y,S.onChange(b,y))}}}else{var T=c.checked;h[u]!==T&&(h[u]=T,v.onChange(h,T))}}else{if(d){var N=c.value;h[u]!==N&&(h[u]=N,v.onChange(h,N))}if(s){var w=c.selectionStart,I=c.selectionEnd,M=c.selectionDirection,$=!1,A=h[f];if(null==M?I===A&&($=!0):"backward"===M&&($=!0),$){var D=w;w=I,I=D}i(l,w,I)}}return!1}function i(e,n,t){var r=e.component,o=e.ctx;!r||o[f]===n&&o[v]===t||(o[f]=n,o[v]=t,r.onSelectionChange(o,{startPosition:n,endPosition:t}))}function c(e,n,t){void 0===t&&(t=n),e.element.setSelectionRange(Math.min(n,t),Math.max(n,t),n>t?"backward":"forward"),i(e,n,t)}function l(n,t,r){var o=e.focused&&e.focused();return o&&a(n,o.element,o),!1}for(var u="b$value",f="b$selStart",v="b$selEnd",d="value",s=e.setSetValue(function(e,i,c,l){var f=e.tagName,v="SELECT"===f,h="INPUT"===f||"TEXTAREA"===f;if(!h&&!v)return void s(e,i,c,l);void 0===i.ctx&&(i.ctx={}),void 0===l&&(i.ctx[u]=c);var g=v&&e.multiple,m=!1;if(g){var p=e.options,x=o(p);if(!t(c,x))if(void 0===l||t(x,l)||!t(c,i.ctx[u])){for(var E=0;E<p.length;E++)p[E].selected=r(c,p[E].value);x=o(p),t(x,c)&&(m=!0)}else m=!0}else if(h||v)if(h&&n(e)){var k=e.checked;c!==k&&(void 0===l||k===l||c!==i.ctx[u]?e.checked=c:m=!0)}else{var C=v&&e.size<2,P=e[d];c!==P&&(void 0===l||P===l||c!==i.ctx[u]?v?(""===c?e.selectedIndex=C?0:-1:e[d]=c,(""!==c||C)&&(P=e[d],c!==P&&(m=!0))):e[d]=c:m=!0)}m?a(null,e,i):i.ctx[u]=c}),h=["input","cut","paste","keydown","keypress","keyup","click","change"],g=0;g<h.length;g++)e.addEvent(h[g],10,a);for(var m=["!PointerDown","!PointerMove","!PointerUp","!PointerCancel"],g=0;g<m.length;g++)e.addEvent(m[g],2,l);e.select=c}(b);