!function(e,t,n){function r(e){return j===e}function o(){return U}function i(e){j=e}function u(){j=null}function l(e,t){if(null==j)return!1;var n=j.me.component[e];if(!n)return!1;U=!0;var r=n(j,t);return U=!1,r}function c(e){for(;e;){var t=e.style;if(t){var n=t.pointerEvents;if(void 0!==n)return"none"===n?!0:!1}e=e.parent}return!1}function a(t){var n=e.deref(t);return c(n)}function f(e){if(e.length){for(var t=e.length-1;t>=0;--t)e[t].t.style.visibility=e[t].p;return!0}return!1}function s(e,t){e.push({t:t,p:t.style.visibility}),t.style.visibility="hidden"}function v(e,t,r){for(var o=[],i=t;a(i);)s(o,i),i=n.elementFromPoint(e.x,e.y);if(f(o)){try{i.dispatchEvent(e)}catch(u){return!1}return T(e),!0}return!1}function d(e,t){S(e,5,t)}function m(e){return"mouse"==e?0:"pen"==e?2:1}function h(t,r,o,i){for(var u=[],l=o;c(i);)s(u,l),l=n.elementFromPoint(t,r),i=e.deref(l);return f(u),[l,i]}function y(t){return function(n,r,o){if(c(o)){var i=h(n.x,n.y,r,o);r=i[0],o=i[1]}var u=n.button+1,l=m(n.pointerType),a=n.buttons;if(0===u&&0===l&&a)for(u=1;!(1&a);)a>>=1,u++;var f={id:n.pointerId,type:l,x:n.clientX,y:n.clientY,button:u,shift:n.shiftKey,ctrl:n.ctrlKey,alt:n.altKey,meta:n.metaKey||!1};return e.emitEvent("!"+t,f,r,o)?(T(n),!0):!1}}function b(t){return function(r,o,i){for(var u=!1,l=0;l<r.changedTouches.length;l++){var c=r.changedTouches[l];o=n.elementFromPoint(c.clientX,c.clientY),i=e.deref(o);var a={id:c.identifier+2,type:1,x:c.clientX,y:c.clientY,button:1,shift:r.shiftKey,ctrl:r.ctrlKey,alt:r.altKey,meta:r.metaKey||!1};e.emitEvent("!"+t,a,o,i)&&(u=!0)}return u?(T(r),!0):!1}}function p(t){return function(r,o,i){if(o=n.elementFromPoint(r.clientX,r.clientY),i=e.deref(o),c(i)){var u=h(r.clientX,r.clientY,o,i);o=u[0],i=u[1]}var l={id:1,type:0,x:r.clientX,y:r.clientY,button:D(r),shift:r.shiftKey,ctrl:r.ctrlKey,alt:r.altKey,meta:r.metaKey||!1};return e.emitEvent("!"+t,l,o,i)?(T(r),!0):!1}}function w(e,t,n){return Math.abs(e-t)<n}function g(){$&&M($)}function M(t){$=t;var r=n.elementFromPoint(t.x,t.y),o=e.vdomPath(r),i=0==o.length?null:o[o.length-1];if(c(i)){var u=h(t.x,t.y,r,i);r=u[0],o=e.vdomPath(r)}e.bubble(i,"onMouseOver",t);for(var l=0;l<_.length&&l<o.length&&_[l]===o[l];)l++;var a,f,s=_.length;for(s>0&&(a=_[s-1],a&&(f=a.component,f&&f.onMouseOut&&f.onMouseOut(a.ctx,t)));s>l;)s--,a=_[s],a&&(f=a.component,f&&f.onMouseLeave&&f.onMouseLeave(a.ctx,t));for(;s<o.length;)a=o[s],a&&(f=a.component,f&&f.onMouseEnter&&f.onMouseEnter(a.ctx,t)),s++;return _=o,s>0&&(a=_[s-1],a&&(f=a.component,f&&f.onMouseIn&&f.onMouseIn(a.ctx,t))),!1}function x(){return 0===Object.keys(B).length}function K(e,t,n){return-1===H&&x()&&(H=e.id,J=Z(),N=e.x,Q=e.y,R=!1,M(e)),B[e.id]=e.type,H!==e.id&&(R=!0),!1}function P(t,n,r){return 0===t.type&&0===t.button&&null!=B[t.id]&&(t.button=1,e.emitEvent("!PointerUp",t,n,r),t.button=0),H===t.id?(M(t),w(N,t.x,13)&&w(Q,t.y,13)||(R=!0)):x()&&M(t),!1}function E(t,n,r){if(delete B[t.id],H==t.id&&(M(t),H=-1,1==t.type&&!R&&Z()-J<750)){e.emitEvent("!PointerCancel",t,n,r);var o=l(L,t)||null!=e.bubble(r,L,t),i=e.ieVersion()?800:500;return G.push([t.x,t.y,Z()+i,o?1:0]),o}return!1}function X(e,t,n){return delete B[e.id],H==e.id&&(H=-1),!1}function k(e,t,n){for(var r=Z(),o=0;o<G.length;o++){var i=G[o];if(i[2]<r)G.splice(o,1),o--;else if(w(i[0],e.clientX,50)&&w(i[1],e.clientY,50))return G.splice(o,1),i[3]&&T(e),!0}return!1}function O(t){return function(n,r,o){return(H==n.id||x())&&(l(t,n)||e.bubble(o,t,n))?!0:!1}}function D(e){return e.which||e.button}function Y(t,n){return function(r,o,i){var u=D(r)||1;if(!n&&1!==u)return!1;var c={x:r.clientX,y:r.clientY,button:u,shift:r.shiftKey,ctrl:r.ctrlKey,alt:r.altKey,meta:r.metaKey||!1};return l(t,c)||e.bubble(i,t,c)?(T(r),!0):!1}}function C(t,r){var o=n.elementFromPoint(t,r),i=e.deref(o);if(c(i)){var u=h(t,r,o,i);i=u[1]}return i}function F(e,t,n){for(;n;){var r=n.style;if(r){var o=r.userSelect;if("none"===o)return T(e),!0;if(o)break}n=n.parent}return!1}function I(t,n,r){if(c(r)){var o=h(t.x,t.y,n,r);n=o[0],r=o[1]}var i=t.button+1,u=t.buttons;if(0===i&&u)for(i=1;!(1&u);)u>>=1,i++;var a,f=0;"mousewheel"==re?(a=-1/40*t.wheelDelta,t.wheelDeltaX&&(f=-1/40*t.wheelDeltaX)):(f=t.deltaX,a=t.deltaY);var s={dx:f,dy:a,x:t.clientX,y:t.clientY,button:i,shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey,meta:t.metaKey||!1};return l("onMouseWheel",s)||e.bubble(r,"onMouseWheel",s)?(T(t),!0):!1}var U,V,j=null,L="onClick",T=e.preventDefault,S=e.addEvent,W=["PointerDown","PointerMove","PointerUp","PointerCancel"];if(e.ieVersion()&&e.ieVersion()<11){var q=["click","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","scroll","wheel"];for(V=0;V<q.length;++V)S(q[V],1,v)}if(void 0!==t.onpointerdown)for(V=0;4>V;V++){var z=W[V];d(z.toLowerCase(),y(z))}else if(void 0!==t.onmspointerdown)for(V=0;4>V;V++){var z=W[V];d("MS"+z,y(z))}else void 0!==t.ontouchstart&&(d("touchstart",b(W[0])),d("touchmove",b(W[1])),d("touchend",b(W[2])),d("touchcancel",b(W[3]))),d("mousedown",p(W[0])),d("mousemove",p(W[1])),d("mouseup",p(W[2]));for(var A=0;4>A;A++)!function(t){var n="on"+t;S("!"+t,50,function(t,r,o){return l(n,t)||null!=e.bubble(o,n,t)})}(W[A]);for(var B=Object.create(null),G=[],H=-1,J=0,N=0,Q=0,R=!1,Z=e.now,$=null,_=[],ee=["!PointerDown","!PointerMove","!PointerUp","!PointerCancel","click"],te=[K,P,E,X,k],V=0;5>V;V++)S(ee[V],3,te[V]);for(var ne=["Down","Move","Up","Up"],V=0;4>V;V++)S(ee[V],80,O("onMouse"+ne[V]));d("selectstart",F),d("click",Y(L)),d("dblclick",Y("onDoubleClick")),d("contextmenu",Y("onContextMenu",!0));var re=("onwheel"in n.createElement("div")?"":"mouse")+"wheel";d(re,I),e.pointersDownCount=function(){return Object.keys(B).length},e.firstPointerDownId=function(){return H},e.ignoreClick=function(t,n){var r=e.ieVersion()?800:500;G.push([t,n,Z()+r,1])},e.registerMouseOwner=i,e.isMouseOwner=r,e.isMouseOwnerEvent=o,e.releaseMouseOwner=u,e.nodeOnPoint=C,e.revalidateMouseIn=g}(b,window,document);