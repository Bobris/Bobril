!function(e,n,t){function r(e){return F===e}function o(){return X}function i(e){F=e}function u(){F=null}function c(e,n){if(null==F)return!1;var t=F.me.component[e];if(!t)return!1;X=!0;var r=t(F,n);return X=!1,r}function l(e){return e&&e.style&&"none"===e.style.pointerEvents}function f(n){var t=e.deref(n);return l(t)}function v(e){if(e.length){for(var n=e.length-1;n>=0;--n)e[n].t.style.visibility=e[n].p;return!0}return!1}function a(e,n){e.push({t:n,p:n.style.visibility}),n.style.visibility="hidden"}function s(n,r){for(var o=[],i=r;f(i);)a(o,i),i=t.elementFromPoint(n.x,n.y);if(v(o)){try{e.ieVersion()<9?i.fireEvent("on"+n.type,n):i.dispatchEvent(n)}catch(u){return!1}return j(n),!0}return!1}function d(e,n){L(e,5,n)}function y(e){return"mouse"==e?0:"pen"==e?2:1}function m(n,r,o,i){for(var u=[],c=o;l(i);)a(u,c),c=t.elementFromPoint(n,r),i=e.deref(c);return v(u),[c,i]}function h(n){return function(t,r,o){if(l(o)){var i=m(t.x,t.y,r,o);r=i[0],o=i[1]}var u={id:t.pointerId,type:y(t.pointerType),x:t.clientX,y:t.clientY};return e.emitEvent("!"+n,u,r,o)?(j(t),!0):!1}}function p(n){return function(r,o,i){for(var u=!1,c=0;c<r.changedTouches.length;c++){var l=r.changedTouches[c];o=t.elementFromPoint(l.clientX,l.clientY),i=e.deref(o);var f={id:l.identifier+2,type:1,x:l.clientX,y:l.clientY};e.emitEvent("!"+n,f,o,i)&&(u=!0)}return u?(j(r),!0):!1}}function b(n){return function(r,o,i){if(o=t.elementFromPoint(r.clientX,r.clientY),i=e.deref(o),l(i)){var u=m(r.x,r.y,o,i);o=u[0],i=u[1]}var c={id:1,type:0,x:r.clientX,y:r.clientY};return e.emitEvent("!"+n,c,o,i)?(j(r),!0):!1}}function g(e,n,t){return Math.abs(e-n)<t}function x(n){var r={x:n.x,y:n.y},o=t.elementFromPoint(n.x,n.y),i=e.vdomPath(o),u=0==i.length?null:i[i.length-1];if(l(u)){var c=m(n.x,n.y,o,u);o=c[0],i=e.vdomPath(o)}e.bubble(u,"onMouseOver",r);for(var f=0;f<N.length&&f<i.length&&N[f]===i[f];)f++;for(var v,a,s=N.length;s>f;)s--,v=N[s],v&&(a=v.component,a&&a.onMouseLeave&&a.onMouseLeave(v.ctx,r));for(;s<i.length;)v=i[s],v&&(a=v.component,a&&a.onMouseEnter&&a.onMouseEnter(v.ctx,r)),s++;return N=i,!1}function w(){return 0===Object.keys(q).length}function P(e){return-1===A&&w()&&(A=e.id,B=K(),G=e.x,H=e.y,J=!1,x(e)),q[e.id]=e.type,A!==e.id&&(J=!0),!1}function M(e){return A===e.id?(x(e),g(G,e.x,13)&&g(H,e.y,13)||(J=!0)):w()&&x(e),!1}function E(n,t,r){if(delete q[n.id],A==n.id&&(x(n),A=-1,1==n.type&&!J&&K()-B<750)){e.emitEvent("!PointerCancel",n,t,r);var o={x:n.x,y:n.y},i=c(U,o)||e.bubble(r,U,o);return z.push([n.x,n.y,K()+500,i?1:0]),i}return!1}function k(e){return delete q[e.id],A==e.id&&(A=-1),!1}function C(e){for(var n=K(),t=0;t<z.length;t++){var r=z[t];if(r[2]<n)z.splice(t,1),t--;else if(g(r[0],e.clientX,50)&&g(r[1],e.clientY,50))return z.splice(t,1),r[3]&&j(e),!0}return!1}function O(n){return function(t,r,o){if(A!=t.id&&!w())return!1;var i={x:t.x,y:t.y};return c(n,i)||e.bubble(o,n,i)?!0:!1}}function D(n){return function(t,r,o){var i={x:t.clientX,y:t.clientY};return c(n,i)||e.bubble(o,n,i)?(j(t),!0):!1}}var X,Y,F=null,U="onClick",j=e.preventDefault,L=e.addEvent,T=["PointerDown","PointerMove","PointerUp","PointerCancel"];if(e.ieVersion()&&e.ieVersion()<11){var V=["click","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","scroll","wheel"];for(Y=0;Y<V.length;++Y)L(V[Y],1,s)}if(void 0!==n.onpointerdown)for(Y=0;4>Y;Y++){var I=T[Y];d(I.toLowerCase(),h(I))}else if(void 0!==n.onmspointerdown)for(Y=0;4>Y;Y++){var I=T[Y];d("MS"+I,h(I))}else void 0!==n.ontouchstart&&(d("touchstart",p(T[0])),d("touchmove",p(T[1])),d("touchend",p(T[2])),d("touchcancel",p(T[3]))),d("mousedown",b(T[0])),d("mousemove",b(T[1])),d("mouseup",b(T[2]));for(var S=0;4>S;S++)!function(n){var t="on"+n;L("!"+n,50,function(n,r,o){return c(t,n)||e.bubble(o,t,n)})}(T[S]);for(var q=Object.create(null),z=[],A=-1,B=0,G=0,H=0,J=!1,K=e.now,N=[],Q=["!PointerDown","!PointerMove","!PointerUp","!PointerCancel","click"],R=[P,M,E,k,C],Y=0;5>Y;Y++)L(Q[Y],3,R[Y]);for(var W=["Down","Move","Up","Up"],Y=0;4>Y;Y++)L(Q[Y],80,O("onMouse"+W[Y]));d("click",D(U)),d("dblclick",D("onDoubleClick")),e.pointersDownCount=function(){return Object.keys(q).length},e.firstPointerDownId=function(){return A},e.ignoreClick=function(e,n){z.push([e,n,K()+500,1])},e.registerMouseOwner=i,e.isMouseOwner=r,e.isMouseOwnerEvent=o,e.releaseMouseOwner=u}(b,window,document);