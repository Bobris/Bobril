!function(e,n){function t(e){return D===e}function o(){return k}function r(e){D=e}function i(){D=null}function u(e,n){if(null==D)return!1;var t=D.me.component[e];if(!t)return!1;k=!0;var o=t(D,n);return k=!1,o}function l(e){return e&&e.style&&"none"===e.style.pointerEvents}function c(n){var t=e.deref(n);return l(t)}function s(n,t){for(var o=[],r=t;c(r);)o.push({target:r,prevVisibility:r.style.visibility}),r.style.visibility="hidden",r=document.elementFromPoint(n.x,n.y);if(o.length){for(var i=o.length-1;i>=0;--i)o[i].target.style.visibility=o[i].prevVisibility;if(e.ieVersion()<9)r.fireEvent("on"+n.type,n);else try{r.dispatchEvent(n)}catch(u){return!1}return O(n),!0}return!1}function v(e,n){V(e,500,n)}function f(e){return"mouse"==e?0:"pen"==e?2:1}function a(n,t,o,r){for(var i=[],u=o;l(r);)i.push({target:u,prevVisibility:u.style.visibility}),u.style.visibility="hidden",u=document.elementFromPoint(n,t),r=e.deref(u);if(i.length)for(var c=i.length-1;c>=0;--c)i[c].target.style.visibility=i[c].prevVisibility;return[o,r]}function d(n){return function(t,o,r){if(l(r)){var i=a(t.x,t.y,o,r);o=i[0],r=i[1]}var u={id:t.pointerId,type:f(t.pointerType),x:t.clientX,y:t.clientY};return e.emitEvent("!"+n,u,o,r)?(O(t),!0):!1}}function y(n){return function(t,o,r){for(var i=!1,u=0;u<t.changedTouches.length;u++){var l=t.changedTouches[u],c={id:l.identifier+2,type:1,x:l.clientX,y:l.clientY};e.emitEvent("!"+n,c,o,r)&&(i=!0)}return i?(O(t),!0):!1}}function m(n){return function(t,o,r){if(l(r)){var i=a(t.x,t.y,o,r);o=i[0],r=i[1]}var u={id:1,type:0,x:t.clientX,y:t.clientY};return e.emitEvent("!"+n,u,o,r)?(O(t),!0):!1}}function h(e,n,t){return Math.abs(e-n)<t}function p(e){return-1===j&&0===Object.keys(L).length&&(j=e.id,F=z(),I=e.x,S=e.y,q=!1),L[e.id]=e.type,j!==e.id&&(q=!0),!1}function g(e){return j===e.id&&(h(I,e.x,13)&&h(S,e.y,13)||(q=!0)),!1}function b(n,t,o){if(delete L[n.id],j==n.id&&(j=-1,!q&&z()-F<750)){e.emitEvent("!PointerCancel",n,t,o);var r={x:n.x,y:n.y};if(u("onClick",r)||e.bubble(o,"onClick",r))return T.push([n.x,n.y,z()]),!0}return!1}function w(e){return delete L[e.id],j==e.id&&(j=-1),!1}function M(){return!1}function P(e){return{x:e.clientX,y:e.clientY}}function x(n){for(var t=P(n),o=e.vdomPath(n.toElement),r=0;r<A.length&&r<o.length&&A[r]===o[r];)r++;for(var i,u,l=A.length;l>r;)l--,i=A[l],i&&(u=i.component,u&&u.onMouseLeave&&u.onMouseLeave(i.ctx,t));for(;l<o.length;)i=o[l],i&&(u=i.component,u&&u.onMouseEnter&&u.onMouseEnter(i.ctx,t)),l++;return A=o,!1}function E(n,t){return function(o,r,i){var l=P(o);return(t?!1:u(n,l))||e.bubble(i,n,l)?(O(o),!0):!1}}var k,C,D=null,O=e.preventDefault,V=e.addEvent,U=["PointerDown","PointerMove","PointerUp","PointerCancel"];if(e.ieVersion()&&e.ieVersion()<11){var X=["click","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","scroll","wheel"];for(C=0;C<X.length;++C)V(X[C],1,s)}if(void 0!==n.onpointerdown)for(C=0;C<U.length;C++)!function(e){v(e.toLowerCase(),d(e))}(U[C]);else if(void 0!==n.onmspointerdown)for(C=0;C<U.length;C++)!function(e){v("MS"+e,d(e))}(U[C]);else void 0!==n.ontouchstart&&(v("touchstart",y("PointerDown")),v("touchmove",y("PointerMove")),v("touchend",y("PointerUp")),v("touchcancel",y("PointerCancel"))),v("mousedown",m("PointerDown")),v("mousemove",m("PointerMove")),v("mouseup",m("PointerUp"));for(var Y=0;Y<U.length;Y++)!function(n){var t="on"+n;V("!"+n,500,function(n,o,r){return u(t,n)?!0:e.bubble(r,t,n)})}(U[Y]);for(var L=Object.create(null),T=[],j=-1,F=0,I=0,S=0,q=!1,z=e.now,A=[],B=["!PointerDown","!PointerMove","!PointerUp","!PointerCancel","click","mouseover"],G=[p,g,b,w,M,x],C=0;C<B.length;C++)V(B[C],300,G[C]);v("mousedown",E("onMouseDown")),v("mouseup",E("onMouseUp")),v("mousemove",E("onMouseMove")),v("click",E("onClick")),v("dblclick",E("onDoubleClick")),v("mouseover",E("onMouseOver",1)),e.registerMouseOwner=r,e.isMouseOwner=t,e.isMouseOwnerEvent=o,e.releaseMouseOwner=i}(b,window);