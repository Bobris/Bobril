!function(e){function n(e){var n=e.type;return"checkbox"===n||"radio"===n}function t(e,n){var t=e.length;if(t!==n.length)return!1;for(var r=0;t>r;r++)if(e[r]!==n[r])return!1;return!0}function r(e,n){for(var t=0;t<e.length;t++)if(e[t]===n)return!0;return!1}function a(e){for(var n=[],t=0;t<e.length;t++)e[t].selected&&n.push(e[t].value);return n}function i(r,u,f){if(u&&"OPTION"===u.nodeName&&(u=document.activeElement,f=e.deref(u)),!f)return!1;var v=f.component;if(!v)return!1;var d=null!=v.onChange,s=null!=v.onSelectionChange;if(!d&&!s)return!1;var h=f.ctx,g=u.tagName,m="SELECT"===g,p=m&&u.multiple;if(d&&p){var x=a(u.options);t(h[o],x)||(h[o]=x,v.onChange(h,x))}else if(d&&n(u)){if(r&&"change"===r.type)return setTimeout(function(){i(null,u,f)},10),!1;if("radio"===u.type)for(var E=document.getElementsByName(u.name),k=0;k<E.length;k++){var C=E[k],y=e.deref(C);if(y){var S=y.component;if(S&&S.onChange){var T=y.ctx,b=C.checked;T[o]!==b&&(T[o]=b,S.onChange(T,b))}}}else{var N=u.checked;h[o]!==N&&(h[o]=N,v.onChange(h,N))}}else{if(d){var P=u.value;h[o]!==P&&(h[o]=P,v.onChange(h,P))}if(s){var I=u.selectionStart,$=u.selectionEnd;if("backward"===u.selectionDirection){var w=I;I=$,$=w}(h[c]!==I||h[l]!==$)&&(h[c]=I,h[l]=$,v.onSelectionChange(h,{startPosition:I,endPosition:$}))}}return!1}for(var o="b$value",c="b$selStart",l="b$selEnd",u="value",f=e.setSetValue(function(e,c,l,v){var d=e.tagName,s="SELECT"===d,h="INPUT"===d||"TEXTAREA"===d;if(!h&&!s)return void f(e,c,l,v);void 0===c.ctx&&(c.ctx={}),void 0===v&&(c.ctx[o]=l);var g=s&&e.multiple,m=!1;if(g){var p=e.options,x=a(p);if(!t(l,x))if(void 0===v||t(x,v)||!t(l,c.ctx[o])){for(var E=0;E<p.length;E++)p[E].selected=r(l,p[E].value);x=a(p),t(x,l)&&(m=!0)}else m=!0}else if(h||s)if(h&&n(e)){var k=e.checked;l!==k&&(void 0===v||k===v||l!==c.ctx[o]?e.checked=l:m=!0)}else{var C=s&&e.size<2,y=e[u];l!==y&&(void 0===v||y===v||l!==c.ctx[o]?s?(""===l?e.selectedIndex=C?0:-1:e[u]=l,(""!==l||C)&&(y=e[u],l!==y&&(m=!0))):e[u]=l:m=!0)}m?i(null,e,c):c.ctx[o]=l}),v=["input","cut","paste","keydown","keypress","keyup","click","change"],d=0;d<v.length;d++)e.addEvent(v[d],10,i)}(b);